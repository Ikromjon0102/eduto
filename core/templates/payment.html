{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">To'lovlar ro'yxati</h2>

    <table class="table table-bordered">
        <thead class="thead-dark">
            <tr>
                <th>O'quvchi</th>
                <th>Guruh</th>
                <th>Kurs</th>
                <th>Oy</th>
                <th>Summa</th>
                <th>Status</th>
                <th>To'lov sanasi</th>
                <th>Izoh</th>
            </tr>
        </thead>
        <tbody>
            {% for item in payment_status %}
                <tr {% if item.is_overdue %}class="table-danger"{% endif %}>
                    <td>{{ item.payment.student.username }}</td>
                    <td>{{ item.payment.group.name }}</td>
                    <td>{{ item.payment.course.name }}</td>
                    <td>{{ item.payment.month }}-oy</td>
                    <td>{{ item.payment.amount }} so'm</td>
                    <td>
                        {% if item.payment.status == 'paid' %}
                            <span class="badge badge-success">To'langan</span>
                        {% else %}
                            <span class="badge badge-warning">To'lanmagan</span>
                        {% endif %}
                    </td>
                    <td>{{ item.payment.date|date:"d.m.Y" }}</td>
                    <td>{{ item.payment.comment|default:"-" }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
